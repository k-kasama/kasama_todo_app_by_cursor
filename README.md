# TODO アプリ

Windows上で動作するモダンなTODOアプリケーションです。

## 🚀 機能

### 基本機能
- ✅ タスクの追加・削除・編集
- ✅ タスクの完了/未完了の切り替え
- ✅ IndexedDBによる大容量データ永続化
- ✅ リアルタイム統計表示
- ✅ メールからの自動TODO作成
- ✅ 優先度付きタスク管理
- ✅ 予測時間と期限の設定
- ✅ 自動スケジュール割り振り

### フィルター機能
- 🔍 すべてのタスク表示
- 🔍 未完了タスクのみ表示
- 🔍 完了済みタスクのみ表示

### 一括操作
- 🗑️ 完了済みタスクの一括削除
- 🗑️ すべてのタスクの一括削除

### ユーザビリティ
- 📱 レスポンシブデザイン（モバイル対応）
- ⌨️ キーボードショートカット対応
- 🔔 通知システム
- 🎨 モダンで美しいUI

## 🛠️ 使用方法

### 1. アプリケーションの起動
```bash
# index.htmlファイルをダブルクリックするか、
# ブラウザでindex.htmlを開いてください
```

### 2. 基本的な操作

#### タスクの追加
- 入力フィールドにタスクを入力
- 「+」ボタンをクリックまたはEnterキーを押す
- **ショートカット**: Ctrl/Cmd + Enter

#### タスクの完了
- タスクの左側の丸いチェックボックスをクリック

#### タスクの編集
- タスクの右側の編集ボタン（鉛筆アイコン）をクリック

#### タスクの削除
- タスクの右側の削除ボタン（ゴミ箱アイコン）をクリック

#### 時間と期限の設定
- タスク入力時に予測時間（時間）と期限（日付）を設定可能
- 時間は0.5時間単位で入力可能
- 期限は日付選択で設定

### 3. 自動スケジュール割り振り
- 「スケジュール自動割り振り」ボタンをクリック
- 1日の作業時間を設定（デフォルト: 6時間）
- 開始日を設定
- 「スケジュール生成」ボタンをクリック
- 優先度と期限に基づいて平日に自動割り振り

#### スケジュール機能の特徴
- **優先度順**: 高優先度 → 中優先度 → 低優先度
- **期限順**: 期限が近いタスクを優先
- **平日のみ**: 土日は除外して平日に割り振り
- **時間管理**: 1日の作業時間を超えないよう調整
- **開始時間**: 9時開始で順次割り振り

### 4. メールからのTODO作成
- 「メールからTODOを作成」ボタンをクリック
- メールの件名と本文を入力
- 「解析してTODOを作成」ボタンをクリック
- 自動抽出されたTODOアイテムを確認・選択
- 「選択したアイテムを追加」でTODOリストに追加

#### 対応するメール形式
- TODO: タスク内容
- To Do: タスク内容
- タスク: タスク内容
- やること: タスク内容
- 箇条書き（- タスク内容）
- 番号付きリスト（1. タスク内容）

#### 自動抽出機能
- **優先度の自動判定**: 緊急、急ぎ、重要、優先、urgent、important、asap、至急
- **時間の自動抽出**: 「2時間」「3.5h」「4hr」などの表記を自動認識
- **期限の自動抽出**: 「2024-12-31」「12/31」「期限: 来週」などの表記を自動認識

### 5. フィルター機能
- 「すべて」「未完了」「完了済み」ボタンで表示を切り替え

### 6. 一括操作
- 「完了済みを削除」: 完了済みのタスクをすべて削除
- 「すべて削除」: すべてのタスクを削除

## ⌨️ キーボードショートカット

| ショートカット | 機能 |
|---------------|------|
| `Enter` | タスクを追加 |
| `Ctrl/Cmd + Enter` | タスクを追加 |
| `Escape` | 入力フィールドをクリア |

## 💾 データ保存・読み込み

### データ保存
- タスクデータはブラウザのIndexedDBに自動保存されます
- ブラウザを閉じてもデータは保持されます
- 大容量データ（数GBまで）を効率的に保存可能
- プライベートブラウジングモードではデータが保持されない場合があります

### データ読み込み仕様

#### 1. 初期化フロー
1. **ローディング表示開始**: アプリケーション起動時にローディングスピナーを表示
2. **IndexedDB接続試行**: 10秒のタイムアウト付きでIndexedDBへの接続を試行
3. **フォールバック処理**: IndexedDB接続失敗時は自動的にLocalStorageに切り替え
4. **データ読み込み**: 保存されたタスクデータを読み込み
5. **レンダリング**: 読み込み完了後にタスクリストを表示
6. **ローディング表示終了**: 処理完了後にローディング表示を非表示

#### 2. エラーハンドリング
- **IndexedDB接続タイムアウト**: 10秒でタイムアウト、LocalStorageに自動フォールバック
- **IndexedDB未対応ブラウザ**: 自動的にLocalStorageを使用
- **データ読み込みエラー**: エラーログを出力し、空の状態でアプリケーションを継続
- **レンダリングエラー**: エラーログを出力し、アプリケーションを継続

#### 3. フォールバック機能
- **Primary**: IndexedDB（大容量、構造化データ対応）
- **Fallback**: LocalStorage（小容量、シンプルなデータ構造）
- **自動切り替え**: IndexedDB失敗時に自動的にLocalStorageに切り替え
- **透過的動作**: ユーザーは切り替えを意識する必要がない

#### 4. 読み込み中の表示
- **ローディングスピナー**: 回転するアニメーション付きスピナー
- **メッセージ表示**: 「データを読み込み中...」のテキスト
- **適用操作**: 
  - アプリケーション初期化
  - タスク追加
  - タスク更新（完了/未完了、ステータス変更）
  - タスク削除

#### 5. パフォーマンス最適化
- **非同期処理**: UIブロッキングを防ぐため非同期でデータ操作
- **最小限の再レンダリング**: 必要な時のみDOM更新
- **効率的なデータ構造**: インデックス付きで高速検索
- **メモリ管理**: 不要なデータの自動クリーンアップ

## 🎨 デザイン特徴

- **モダンなグラデーション背景**
- **スムーズなアニメーション**
- **直感的なユーザーインターフェース**
- **Windows 10/11に最適化されたデザイン**
- **高コントラストで見やすい配色**

## 📱 対応ブラウザ

- ✅ Chrome (推奨)
- ✅ Firefox
- ✅ Edge
- ✅ Safari
- ✅ Opera

## 🔧 技術仕様

- **HTML5**: セマンティックなマークアップ
- **CSS3**: モダンなスタイリングとアニメーション
- **JavaScript (ES6+)**: クラスベースのアーキテクチャ
- **IndexedDB**: 大容量データの永続化
- **Font Awesome**: アイコンライブラリ
- **Google Fonts**: Inter フォント

### 💾 データストレージ・読み込みについて

このアプリケーションは**IndexedDB**をプライマリストレージとして使用し、**LocalStorage**をフォールバックとして実装しています。

#### プライマリストレージ: IndexedDB
- **大容量対応**: localStorageの5MB制限を大幅に拡張（通常50MB〜数GB）
- **構造化データ**: 複雑なデータ構造を効率的に保存
- **インデックス機能**: 高速な検索とフィルタリング
- **非同期処理**: UIのブロッキングを防ぐ
- **将来性**: モダンブラウザで標準サポート

#### フォールバックストレージ: LocalStorage
- **互換性**: すべてのモダンブラウザでサポート
- **シンプル**: キー・バリューペアでの簡単なデータ保存
- **同期処理**: 即座にデータが利用可能
- **容量制限**: 通常5MB程度

#### 自動フォールバック機能
- **IndexedDB接続失敗時**: 自動的にLocalStorageに切り替え
- **タイムアウト処理**: 10秒でIndexedDB接続をタイムアウト
- **透過的動作**: ユーザーは切り替えを意識する必要がない
- **エラーハンドリング**: 各段階でのエラーを適切に処理

#### 代替ストレージオプション

1. **IndexedDB**（現在使用中）
   - 容量: 50MB〜数GB
   - 特徴: 構造化データ、インデックス、非同期

2. **LocalStorage**（フォールバック）
   - 容量: 5MB程度
   - 特徴: シンプル、同期処理、高互換性

3. **WebSQL**（非推奨）
   - 容量: 50MB〜数GB
   - 特徴: SQLiteベース、同期API

4. **Cache API**
   - 容量: 数GB
   - 特徴: ファイル保存、オフライン対応

5. **データ圧縮**
   - 容量: localStorage内で効率化
   - 特徴: 既存コードとの互換性

## 🚀 今後の拡張予定

- [x] メールからの自動TODO作成
- [x] 優先度設定
- [x] 予測時間と期限設定
- [x] 自動スケジュール割り振り
- [ ] カテゴリ機能
- [ ] データエクスポート/インポート
- [ ] ダークモード
- [ ] 音声入力対応
- [ ] メール自動インポート（IMAP/POP3）
- [ ] カレンダー連携
- [ ] チーム共有機能

## 📄 ライセンス

このプロジェクトはMITライセンスの下で公開されています。

## 🤝 貢献

バグ報告や機能要望は、GitHubのIssuesでお知らせください。

---

**開発者**: AI Assistant  
**バージョン**: 1.0.0  
**最終更新**: 2024年
